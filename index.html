<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>AI Dali Emploi en CEM</title>
<style>
    body { background-color: #111; color: #eee; font-family: Arial, sans-serif; }
    table { border-collapse: collapse; width: 100%; margin-bottom: 20px; }
    th, td { border: 1px solid #888; padding: 8px; text-align: center; }
    th { background-color: #333; }
    input, select, button { padding: 5px; margin: 2px; }
    .btn { background-color: #444; color: #eee; border: none; cursor: pointer; }
    .btn:hover { background-color: #666; }
    .profile-img { width: 50px; height: 50px; border-radius: 50%; }
</style>
</head>
<body>

<h1>AI Dali Emploi en CEM</h1>

<div>
    <label>صورة البروفايل: </label>
    <input type="file" id="profileImage" accept="image/*"><br><br>
</div>

<h2>مدخلات الأساتذة</h2>
<table id="teacherInputs">
<thead>
<tr>
<th>الاسم</th>
<th>المادة</th>
<th>الأقسام المسندة (مثال: 4م1,4م3)</th>
<th>عدد الساعات الأسبوعية</th>
<th>إجراءات</th>
</tr>
</thead>
<tbody>
</tbody>
</table>
<button class="btn" onclick="addTeacher()">إضافة أستاذ</button>

<h2>مدخلات الأقسام</h2>
<table id="sectionInputs">
<thead>
<tr>
<th>المستوى</th>
<th>عدد الأقسام</th>
</tr>
</thead>
<tbody>
<tr>
<td>السنة الأولى</td>
<td><input type="number" id="level1" value="5" min="1"></td>
</tr>
<tr>
<td>السنة الثانية</td>
<td><input type="number" id="level2" value="4" min="1"></td>
</tr>
<tr>
<td>السنة الثالثة</td>
<td><input type="number" id="level3" value="3" min="1"></td>
</tr>
<tr>
<td>السنة الرابعة</td>
<td><input type="number" id="level4" value="2" min="1"></td>
</tr>
</tbody>
</table>

<button class="btn" onclick="fillMySchool()">مؤسستي</button>
<button class="btn" onclick="generateTables()">توليد الجداول</button>
<button class="btn" onclick="resetTables()">إعادة التعيين</button>

<h2>جداول الأساتذة</h2>
<div id="teacherTables"></div>

<h2>جداول التلاميذ</h2>
<div id="studentTables"></div>

<h2>جدول المؤسسة</h2>
<div id="schoolTable"></div>

<script>
let teachers = [];

function addTeacher(name='', subject='', sections='', hours=0) {
    const tbody = document.querySelector('#teacherInputs tbody');
    const tr = document.createElement('tr');
    tr.innerHTML = `
    <td><input type="text" value="${name}"></td>
    <td><input type="text" value="${subject}"></td>
    <td><input type="text" value="${sections}"></td>
    <td><input type="number" value="${hours}" min="1" max="20"></td>
    <td><button onclick="deleteRow(this)">حذف</button></td>
    `;
    tbody.appendChild(tr);
}

function deleteRow(btn) {
    btn.closest('tr').remove();
}

function fillMySchool() {
    // أمثلة افتراضية للأساتذة
    teachers = [];
    document.querySelector('#teacherInputs tbody').innerHTML = '';
    addTeacher('دالي', 'رياضيات', '1م1,1م2', 6);
    addTeacher('أحمد', 'عربية', '1م1,2م2', 5);
    addTeacher('ليلى', 'فرنسية', '1م3,2م1', 4);
    addTeacher('سامي', 'علوم', '3م1,3م2', 4);
}

function generateTables() {
    // جمع بيانات الأساتذة
    teachers = [];
    document.querySelectorAll('#teacherInputs tbody tr').forEach(tr=>{
        const inputs = tr.querySelectorAll('input');
        teachers.push({
            name: inputs[0].value,
            subject: inputs[1].value,
            sections: inputs[2].value.split(','),
            hours: parseInt(inputs[3].value)
        });
    });

    // توليد جداول الأساتذة
    const teacherDiv = document.getElementById('teacherTables');
    teacherDiv.innerHTML = '';
    teachers.forEach(t=>{
        let table = '<table><tr><th>أستاذ: '+t.name+'</th></tr>';
        t.sections.forEach(s=>{
            table += `<tr><td>${s} - ${t.subject} - ${t.hours} ساعة</td></tr>`;
        });
        table += '</table>';
        teacherDiv.innerHTML += table;
    });

    // توليد جداول التلاميذ (مثال)
    const studentDiv = document.getElementById('studentTables');
    studentDiv.innerHTML = '';
    const levels = [parseInt(document.getElementById('level1').value),
                    parseInt(document.getElementById('level2').value),
                    parseInt(document.getElementById('level3').value),
                    parseInt(document.getElementById('level4').value)];
    for(let i=0;i<levels.length;i++){
        for(let j=1;j<=levels[i];j++){
            let table = `<table><tr><th>القسم ${i+1}م${j}</th></tr>`;
            teachers.forEach(t=>{
                if(t.sections.includes(`${i+1}م${j}`)){
                    table += `<tr><td>${t.subject} - ${t.name}</td></tr>`;
                }
            });
            table += '</table>';
            studentDiv.innerHTML += table;
        }
    }

    // جدول المؤسسة (مثال)
    const schoolDiv = document.getElementById('schoolTable');
    schoolDiv.innerHTML = '<table><tr><th>المؤسسة</th></tr>';
    teachers.forEach(t=>{
        schoolDiv.innerHTML += `<tr><td>${t.name} - ${t.subject} - الأقسام: ${t.sections.join(', ')}</td></tr>`;
    });
    schoolDiv.innerHTML += '</table>';
}

function resetTables() {
    document.querySelector('#teacherInputs tbody').innerHTML = '';
    document.getElementById('teacherTables').innerHTML = '';
    document.getElementById('studentTables').innerHTML = '';
    document.getElementById('schoolTable').innerHTML = '';
}
</script>

</body>
</html>
